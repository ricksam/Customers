/*[UPDATE]1*/
CREATE TABLE EMP_EMPRESA(
  EMP_CODIGO INTEGER NOT NULL,
  EMP_NOME VARCHAR(40),
  EMP_INATIVO BIT,
  CONSTRAINT PK_EMP_CODIGO PRIMARY KEY(EMP_CODIGO)
);
CREATE TABLE CLB_COLABORADOR(
  CLB_CODIGO INTEGER NOT NULL,
  CLB_EMP_CODIGO INTEGER NOT NULL,
  CLB_NOME VARCHAR(60),  
  CLB_FONE VARCHAR(20),
  CLB_RECADO VARCHAR(20),
  CLB_LOGRADOURO VARCHAR(60),
  CLB_NUMERO VARCHAR(20),
  CLB_BAIRRO VARCHAR(40),
  CLB_CIDADE VARCHAR(40),
  CLB_ESTADO VARCHAR(2),
  CLB_CEP VARCHAR(20),
  CLB_OBS VARCHAR(400),
  CLB_FOTO TEXT,
  CLB_SALARIO NUMERIC(15,4),
  CLB_ADMISSAO DATE,
  CLB_DEMISSAO DATE,
  CLB_EXPERIENCIA BIT,
  CLB_TERMINO_EXPERIENCIA DATE,
  CLB_INATIVO BIT,
  CONSTRAINT PK_CLB_CODIGO PRIMARY KEY (CLB_CODIGO),
  CONSTRAINT FK_CLB_EMP_CODIGO FOREIGN KEY (CLB_EMP_CODIGO) REFERENCES EMP_EMPRESA(EMP_CODIGO)
);
CREATE TABLE CFG_CONFIG(
  CFG_CAMPO_REMUNERACAO VARCHAR(20),
  CFG_CAMPO_REMUNERACAO_TOTAL VARCHAR(20),
  CFG_CAMPO_DESCONTO_TOTAL VARCHAR(20),
  CFG_CAMPO_REMUNERACAO_LIQUIDA VARCHAR(20),
  CFG_CAMPO_REFERENCIA VARCHAR(20)
);
CREATE TABLE OPR_OPERACAO(
  OPR_CODIGO INTEGER NOT NULL,
  OPR_DESCRICAO VARCHAR(40),
  OPR_CAMPO VARCHAR(20),
  OPR_CALCULO VARCHAR(400),
  OPR_OBS VARCHAR(400),
  OPR_TIPO CHAR(1), /*C CREDITO N NEUTRO D DEBITO*/
  OPR_DIARIO BIT,/*SOMENTE USADO EM LANÇAMENTO DIÁRIO*/
  OPR_NIVEL INTEGER,
  CONSTRAINT PK_TPL_CODIGO PRIMARY KEY(OPR_CODIGO)
);
CREATE TABLE LNC_LANCAMENTO(
  LNC_CODIGO INTEGER NOT NULL,  
  LNC_OPR_CODIGO INTEGER,
  LNC_CLB_CODIGO INTEGER,
  LNC_EMP_CODIGO INTEGER,
  LNC_MES INTEGER,
  LNC_ANO INTEGER,
  LNC_REFERENCIA NUMERIC(15,4),
  LNC_VALOR NUMERIC(15,4),
  CONSTRAINT PK_LNC_CODIGO PRIMARY KEY(LNC_CODIGO),
  CONSTRAINT FK_LNC_OPR_CODIGO FOREIGN KEY(LNC_OPR_CODIGO) REFERENCES OPR_OPERACAO (OPR_CODIGO),
  CONSTRAINT FK_LNC_CLB_CODIGO FOREIGN KEY (LNC_CLB_CODIGO) REFERENCES CLB_COLABORADOR (CLB_CODIGO),
  CONSTRAINT FK_LNC_EMP_CODIGO FOREIGN KEY (LNC_EMP_CODIGO) REFERENCES EMP_EMPRESA (EMP_CODIGO)
);
CREATE TABLE LCD_LANCAMENTO_DIARIO(
  LCD_CODIGO INTEGER NOT NULL,  
  LCD_OPR_CODIGO INTEGER,
  LCD_CLB_CODIGO INTEGER,
  LCD_EMP_CODIGO INTEGER,
  LCD_DESCRICAO VARCHAR(80),
  LCD_DIA INTEGER,
  LCD_MES INTEGER,
  LCD_ANO INTEGER,
  LCD_DATA DATETIME,
  LCD_REFERENCIA NUMERIC(15,4),
  LCD_VALOR NUMERIC(15,4),
  CONSTRAINT PK_LCD_CODIGO PRIMARY KEY(LCD_CODIGO),
  CONSTRAINT FK_LCD_OPR_CODIGO FOREIGN KEY(LCD_OPR_CODIGO) REFERENCES OPR_OPERACAO (OPR_CODIGO),
  CONSTRAINT FK_LCD_CLB_CODIGO FOREIGN KEY (LCD_CLB_CODIGO) REFERENCES CLB_COLABORADOR (CLB_CODIGO),
  CONSTRAINT FK_LCD_EMP_CODIGO FOREIGN KEY (LCD_EMP_CODIGO) REFERENCES EMP_EMPRESA (EMP_CODIGO)
);
INSERT INTO CFG_CONFIG (CFG_CAMPO_REMUNERACAO,CFG_CAMPO_REMUNERACAO_TOTAL,CFG_CAMPO_DESCONTO_TOTAL,CFG_CAMPO_REMUNERACAO_LIQUIDA,CFG_CAMPO_REFERENCIA) VALUES ('REMUNERACAO','REMUNERACAO_TOTAL','DESCONTOS_TOTAIS','REMUNERACAO_LIQUIDA','REFERENCIA');
/*[UPDATE]2*/
CREATE TABLE OCR_OCORRENCIA(
  OCR_CODIGO INTEGER NOT NULL PRIMARY KEY,
  OCR_DESCRICAO VARCHAR(40),
  OCR_DIAS_ALERTA INTEGER,
  OCR_MENSAGEM_ALERTA VARCHAR(100)
);

CREATE TABLE HTR_HISTORICO(
  HTR_CODIGO INTEGER NOT NULL PRIMARY KEY,
  HTR_EMP_CODIGO INTEGER,
  HTR_CLB_CODIGO INTEGER,
  HTR_OCR_CODIGO INTEGER,
  HTR_DATA DATETIME, 
  HTR_OBSERVACAO VARCHAR(100)
);

CREATE TABLE ALT_ALERTAS(
  ALT_CODIGO INTEGER NOT NULL PRIMARY KEY,
  ALT_EMP_CODIGO INTEGER,
  ALT_CLB_CODIGO INTEGER,
  ALT_HTR_CODIGO INTEGER,
  ALT_OCR_CODIGO INTEGER,
  ALT_DATA DATE,
  ALT_MENSAGEM VARCHAR(100),
  ALT_INATIVO BIT
);

ALTER TABLE CLB_COLABORADOR ADD CLB_DTNASC DATE;
ALTER TABLE CFG_CONFIG ADD CFG_ALERTA_ANIVERSARIO VARCHAR(60);
ALTER TABLE CFG_CONFIG ADD CFG_EMAIL_ALERTA VARCHAR(100);
UPDATE CFG_CONFIG SET CFG_ALERTA_ANIVERSARIO = 'ANIVERSÁRIO AMANHA DIA {0}';
/*[UPDATE]3*/
ALTER TABLE CLB_COLABORADOR ADD CLB_CPF VARCHAR(20);
ALTER TABLE CLB_COLABORADOR ADD CLB_RG VARCHAR(20);
UPDATE CFG_CONFIG SET CFG_ALERTA_ANIVERSARIO = 'ANIVERSÁRIO';
ALTER TABLE ALT_ALERTAS ADD ALT_DATA_FINAL DATE;
ALTER TABLE OCR_OCORRENCIA ADD OCR_DIAS_FINAL_ALERTA INTEGER;
/*[UPDATE]4*/
ALTER TABLE CFG_CONFIG ADD CFG_OCORRENCIAS_AUTOMATICAS VARCHAR(20);